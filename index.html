<!DOCTYPE html>
<html lang="en" class="w-full h-full">
  <head>
    <title>Region/ Polygon Fill Algorithms</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Ion Icons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule
            src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <!-- ACE Code Editor -->
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.6/ace.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.32.6/ext-beautify.min.js"></script>
    
    <style type="text/css" media="screen">
      #editor { 
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }
    </style>

  </head>
  <body class="w-full h-full p-4 relative">
    <div id="app"
         class="w-full h-full flex flex-col
                flex-nowrap gap-2">
      <header class="flex flex-row gap-2
                     justify-between items-center mt-4
                     mb-2">
        <h1 class="text-3xl bold">Region/
          Polygon Fill Algorithms</h1>
        <ion-icon onclick="showSettings()"
                  name="settings-sharp"
                  class="text-4xl text-slate-600
                         hover:text-cyan-400
                         active:text-cyan-500"
                  ></ion-icon>
      </header>
      <div id="inputs"
           class="flex-1 flex flex-col absolute
                  bg-white top-0 left-0 min-w-full
                  min-h-full p-4 hidden">
        <header class="flex flex-row justify-between
                       gap-2 items-center mt-3 mb-2">
          <h2 class="text-2xl bold"
              >Inputs</h2>
          <ion-icon name="close-circle"
                    onclick="hideSettings()"
                    class="text-4xl text-slate-600
                           hover:text-rose-500
                           active:text-rose-600"></ion-icon>
        </header>
        <section id="descWrap"><p id="desc"></p></section>
        <section class="flex-1 relative">
          <div id="editor"
               class="text-sm"></div>
        </section>
      </div>
      <div class="canvas flex-1">
        <canvas
          class="w-full h-full bg-slate-200/75"
          id="myCanvas"></canvas>
      </div>
    </div>
    <script type="text/javascript"
            src="./helper-functions.js"></script>
    <script type="text/javascript"
            src="./bresenham-line-functions.js"></script>
    <script type="text/javascript"
            src="./app.js"></script>
    <script type="text/javascript"
            src="./validation-mask.js"></script>
    <script type="text/javascript"
            src="./fill-connected.js"></script>
    <!-- <script type="text/javascript" -->
    <!--         src="./fill-scanline.js"></script> -->
    <script type="text/javascript"
            src="./script.js"></script>
    <script type="text/javascript">
      const defaultInputs = {
        polygon: [[0.1, 0.1], [0.2, 0.1],
                  [0.7,0.5],
                 ],
        start: [234, 268],
        fillColor: [128,128,128,255],
        strokeColor: [0,0,0,255],
        nAdj: 4,
      }

      const editor = ace.edit("editor");
      const B = ace.require('ace/ext/beautify')
      const app = new AppWithFillConnected('#myCanvas')
      // const app = new AppWithFillScanline('#myCanvas')
      editor.setTheme("ace/theme/monokai");
      editor.session.setMode("ace/mode/javascript");
      editor.getCopyText()
      editor.insert(JSON.stringify(defaultInputs, null, 2))
      editor.session.on('change', updateCanvas)
      setTimeout(() => {updateCanvas()}, 250)
    </script>
    <script type="text/javascript">
      function showSettings() {
        document.querySelector('#inputs').classList.remove('hidden')
      }
      function hideSettings() {
        document.querySelector('#inputs').classList.add('hidden')
      }
    </script>
  </body>
</html>
